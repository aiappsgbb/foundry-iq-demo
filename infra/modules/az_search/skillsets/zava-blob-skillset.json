{
  "@odata.context": "<AZURE_ENDPOINT_PLACEHOLDER>",
  "@odata.etag": "\"0x8DE5ABD08B738DF\"",
  "name": "zava-blob-skillset",
  "description": "Skillset for knowledge source 'zava-blob'",
  "skills": [
    {
      "@odata.type": "#Microsoft.Skills.Text.SplitSkill",
      "name": "SplitSkill",
      "description": "Split document content into chunks",
      "context": "/document",
      "defaultLanguageCode": "en",
      "textSplitMode": "pages",
      "maximumPageLength": 2000,
      "pageOverlapLength": 200,
      "maximumPagesToTake": 0,
      "unit": "characters",
      "inputs": [
        {
          "name": "text",
          "source": "/document/content",
          "sourceContext": null,
          "inputs": []
        }
      ],
      "outputs": [
        {
          "name": "textItems",
          "targetName": "pages"
        }
      ],
      "azureOpenAITokenizerParameters": null
    },
    {
      "@odata.type": "#Microsoft.Skills.Text.AzureOpenAIEmbeddingSkill",
      "name": "AzureOpenAIEmbeddingSkill",
      "description": "Generate embeddings",
      "context": "/document/pages/*",
      "resourceUri": "<AZURE_ENDPOINT_PLACEHOLDER>",
      "apiKey": "<REDACTED>",
      "deploymentId": "text-embedding-3-large",
      "dimensions": 3072,
      "modelName": "text-embedding-3-large",
      "inputs": [
        {
          "name": "text",
          "source": "/document/pages/*",
          "sourceContext": null,
          "inputs": []
        }
      ],
      "outputs": [
        {
          "name": "embedding",
          "targetName": "text_vector"
        }
      ],
      "authIdentity": null
    },
    {
      "@odata.type": "#Microsoft.Skills.Custom.ChatCompletionSkill",
      "name": "GenAISkill",
      "description": "Generate chat responses for image verbalization",
      "context": "/document/normalized_images/*",
      "uri": "<AZURE_ENDPOINT_PLACEHOLDER>",
      "httpMethod": "POST",
      "timeout": "PT1M",
      "batchSize": 1,
      "degreeOfParallelism": null,
      "authResourceId": null,
      "apiKey": "<REDACTED>",
      "extraParametersBehavior": null,
      "inputs": [
        {
          "name": "systemMessage",
          "source": "='You are tasked with generating concise, accurate descriptions of images, figures, diagrams, or charts in documents.'",
          "sourceContext": null,
          "inputs": []
        },
        {
          "name": "userMessage",
          "source": "='Please describe this image.'",
          "sourceContext": null,
          "inputs": []
        },
        {
          "name": "image",
          "source": "/document/normalized_images/*/data",
          "sourceContext": null,
          "inputs": []
        }
      ],
      "outputs": [
        {
          "name": "response",
          "targetName": "verbalizedImage"
        }
      ],
      "httpHeaders": {},
      "authIdentity": null,
      "commonModelParameters": null,
      "extraParameters": null,
      "responseFormat": null
    },
    {
      "@odata.type": "#Microsoft.Skills.Text.AzureOpenAIEmbeddingSkill",
      "name": "VerbalizedImageAzureOpenAIEmbeddingSkill",
      "description": "Generate embeddings",
      "context": "/document/normalized_images/*",
      "resourceUri": "<AZURE_ENDPOINT_PLACEHOLDER>",
      "apiKey": "<REDACTED>",
      "deploymentId": "text-embedding-3-large",
      "dimensions": 3072,
      "modelName": "text-embedding-3-large",
      "inputs": [
        {
          "name": "text",
          "source": "/document/normalized_images/*/verbalizedImage",
          "sourceContext": null,
          "inputs": []
        }
      ],
      "outputs": [
        {
          "name": "embedding",
          "targetName": "verbalizedImage_vector"
        }
      ],
      "authIdentity": null
    }
  ],
  "cognitiveServices": {
    "@odata.type": "#Microsoft.Azure.Search.AIServicesByKey",
    "description": "AI Services for knowledge source",
    "key": "<REDACTED>",
    "subdomainUrl": "<AZURE_ENDPOINT_PLACEHOLDER>"
  },
  "knowledgeStore": null,
  "indexProjections": {
    "selectors": [
      {
        "targetIndexName": "zava-blob-index",
        "parentKeyFieldName": "snippet_parent_id",
        "sourceContext": "/document/pages/*",
        "mappings": [
          {
            "name": "snippet_vector",
            "source": "/document/pages/*/text_vector",
            "sourceContext": null,
            "inputs": []
          },
          {
            "name": "snippet",
            "source": "/document/pages/*",
            "sourceContext": null,
            "inputs": []
          },
          {
            "name": "blob_url",
            "source": "/document/blob_url",
            "sourceContext": null,
            "inputs": []
          }
        ]
      },
      {
        "targetIndexName": "zava-blob-index",
        "parentKeyFieldName": "image_snippet_parent_id",
        "sourceContext": "/document/normalized_images/*",
        "mappings": [
          {
            "name": "snippet_vector",
            "source": "/document/normalized_images/*/verbalizedImage_vector",
            "sourceContext": null,
            "inputs": []
          },
          {
            "name": "snippet",
            "source": "/document/normalized_images/*/verbalizedImage",
            "sourceContext": null,
            "inputs": []
          },
          {
            "name": "blob_url",
            "source": "/document/blob_url",
            "sourceContext": null,
            "inputs": []
          }
        ]
      }
    ],
    "parameters": {
      "projectionMode": "skipIndexingParentDocuments"
    }
  },
  "encryptionKey": null
}